<!DOCTYPE html>
<html dir="rtl" lang="ar"> 
<head>    
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta charset="UTF-8">
<title>مشروع تقنية رقمية</title>
<script src="requirebro.js"></script>
<link rel="stylesheet" type="text/css" href="/styles.css">
</head>
<link rel="stylesheet" href="/styles.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />


</script>
<body onload="checkcookuser()">
<section>
  <div class="air air1"></div>
  <div class="air air2"></div>
  <div class="air air3"></div>
  <div class="nav">
  <input type="checkbox" id="nav-check">
  <div class="nav-header">
   
    <div class="nav-title">
     
      
    </div>
    </div>
    <div id="signinbuttondash">
    
      </div>
  <div class="nav-btn">
    <label for="nav-check">
      <span></span>
      <span></span>
      <span></span>
    </label>
  </div>
  
  <div class="nav-links">

    <a href="flag/flag.html" target="_self" class="navbtnn">علم اي دولة؟</a>
    <a href="" target="_self">الدعم</a>
   
    <a href="" target="_self">الصفحة الرئيسيه</a>
    
  </div>
 
</div>

 
<form action="/ratepost" method="post" class="rateform">
 <br>
  <h1 style="color: #efefef;">التقييم</h1>
  <div class="input-group">
                                        
    <input minlength="1"   required type="text" onkeypress="return /[0-5]/i.test(event.key)" style="color: darkgray;" maxlength="1"   autocomplete="off" class="input" name="rate5" id="rate5">
    <label style="margin-right: 24%;"  class="user-label"  >التقيم من 5</label>
  </div>
  <div class="input-group">
    <br>
    <textarea rows="5" maxlength="128"  required style="color: darkgray; "    autocomplete="off" class="input" id="ratedescription" name="ratedescription"></textarea>
    <label style="margin-right: 24%;"  class="user-label"  >وصف</label>
    </div>
    
  
  <button style="margin-top: 7px;" type="submit" class="popbtn">تم</button>
</form>
    
   
    <script src="https://accounts.google.com/gsi/client" async></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jwt-decode@4.0.0/build/cjs/index.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/requirejs@2.3.6/require.js"></script>
    <script src="temp.js"></script>
    <script>
      



      
      const sighinb = document.getElementById("signinbuttondash");
      sighinb.innerHTML = '<a href="#popupsignin" style="float: left; margin-left: 5px;" class="navbtnn" >تسجيل</a>'
      function getRandomNumber() {
  return Math.floor(Math.random() * (9999 - 1000 + 1)) + 1000;
}

    function myFunction() {
  document.getElementById("myDropdown").classList.toggle("show");
}


window.onclick = function(event) {
  if (!event.target.matches('.dropbtn')) {
    var dropdowns = document.getElementsByClassName("dropdown-content");
    var i;
    for (i = 0; i < dropdowns.length; i++) {
      var openDropdown = dropdowns[i];
      if (openDropdown.classList.contains('show')) {
        openDropdown.classList.remove('show');
      }
    }
  }
}
function pop1() {
  window.location.href = "#popup1";
  
}
function reload() {
  window.location.reload();
}
function setCookie(cname,cvalue,exdays) {
  const d = new Date();
  d.setTime(d.getTime() + (exdays*24*60*60*1000));
  let expires = "expires=" + d.toUTCString();
  document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
}

function getCookie(cname) {
  let name = cname + "=";
  let decodedCookie = decodeURIComponent(document.cookie);
  let ca = decodedCookie.split(';');
  for(let i = 0; i < ca.length; i++) {
    let c = ca[i];
    while (c.charAt(0) == ' ') {
      c = c.substring(1);
    }
    if (c.indexOf(name) == 0) {
      return c.substring(name.length, c.length);
    }
  }
  return "";
}
function deleteCookie(){

  setCookie("username", "0",-1)
  setCookie("userimg", "0",-1)
  setCookie("usercoemail", "0",-1)
  window.location.reload()
}

       function loggcallback(response){
        
            console.log(jwtDecode(response.credential));
            const decodedToken = jwtDecode(response.credential);
            const jsonString = JSON.stringify(decodedToken);
   
    const user = JSON.parse(jsonString);
            if(response.credential){
              const toppic = document.getElementById("circlnav");
              const circlcard = document.getElementById("circlcard");
              const usernamecard = document.getElementById("usernamecard");
              const useremailcard = document.getElementById("useremailcard");
              const sighinb = document.getElementById("signinbuttondash");
              usernamecard.innerHTML = "الاسم:" + user.name;
              useremailcard.innerHTML = "الايميل:" + user.email;
              sighinb.innerHTML = `
              <div class="dropdown">
        <img style="float: left;" src="${user.picture}" onerror="this.onerror=null;this.src='pages/bacc.png';" class="circl dropbtn" onclick="myFunction()"  id="circlnav" alt="">
        <div id="myDropdown" class="dropdown-content">
          
          <button onclick="pop1()" style="width: 90px; margin-top: 7px; margin-right: 5px;" class="btnnews" >
            <span  class="icon" style="margin-right: 36.5px; top: 2px;">
              <i class="fa-solid fa-circle-info"></i>
            </span>
            <span class="text">معلومات</span>
        </button>
        
        <button onclick="deleteCookie()" style="margin-bottom: 7px; width: 90px; margin-top: 7px; margin-right: 5px;" class="btnnews">
          <span class="icon" style="margin-right: 36.5px; top: 37px;">
            <i class="fa-solid fa-right-from-bracket "></i>
          </span>
          <span class="text">خروج</span>
      </button>
        </div>
      </div>
              `
              circlcard.setAttribute('src', user.picture)
             
              
              
             
              
              setCookie("username", user.name, 5);
              setCookie("userimg", user.picture, 5);
              setCookie("usercoemail", user.email, 5)


                
                    }
                   
                }
                function checkverwant() {

                  checkvertorf()
                }
function checkvertorf(){
  let tf = getCookie("tf")
  if (tf == "true"){

  } else{
   
sendemailver()
window.location.href = "#popupver";
    
  }
}
                
                function checkcookuser() {
                  let userco = getCookie("username");
              let userimgco = getCookie("userimg");
              let useremailco = getCookie("usercoemail")
              const circlcard = document.getElementById("circlcard");
              const usernamecard = document.getElementById("usernamecard");
              const useremailcard = document.getElementById("useremailcard");
              const sighinb = document.getElementById("signinbuttondash");
  if (userco != "") {
    sighinb.innerHTML = `
              <div class="dropdown">
        <img style="float: left;" src='${userimgco}' onerror="this.onerror=null;this.src='pages/bacc.png';" class="circl dropbtn" onclick="myFunction()"  id="circlnav" alt="">
        
        <div id="myDropdown" class="dropdown-content">
          
          <button onclick="pop1()" style="width: 90px; margin-top: 7px; margin-right: 5px;" class="btnnews" >
            <span  class="icon" style="margin-right: 36.5px; top: 2px;">
              <i class="fa-solid fa-circle-info"></i>
            </span>
            <span class="text">معلومات</span>
        </button>
        
        <button onclick="deleteCookie()" style="margin-bottom: 7px; width: 90px; margin-top: 7px; margin-right: 5px;" class="btnnews">
          <span class="icon" style="margin-right: 36.5px; top: 37px;">
            <i class="fa-solid fa-right-from-bracket "></i>
          </span>
          <span class="text">خروج</span>
      </button>
     
        </div>
      </div>
              `
              circlcard.setAttribute('src', userimgco)
              usernamecard.innerHTML = "الاسم:" + userco;
              useremailcard.innerHTML = "الايميل:" + useremailco;
              window.location.href = "#popupverwant";
  } else {
    window.location.href = "/#popupsignin";
  }

           
                 
                }
             
    </script>
    

</section>

</body>



